<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code-X - Learn to Code</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <nav class="navbar">
            <div class="nav-brand">
                <h1>Code<span class="accent">-X</span></h1>
            </div>
        </nav>

        <main class="landing-main">
            <div class="hero-section">
                <div class="hero-content">
                    <h1 class="hero-title">Become a <span class="accent">Master Coder</span></h1>
                    <p class="hero-subtitle">Learn HTML, CSS, and JavaScript through 300+ interactive coding challenges. Track your progress, earn achievements, and build real projects.</p>
                    
                    <div class="hero-stats">
                        <div class="stat">
                            <h3>300+</h3>
                            <p>Coding Levels</p>
                        </div>
                        <div class="stat">
                            <h3>3</h3>
                            <p>Languages</p>
                        </div>
                        <div class="stat">
                            <h3>50+</h3>
                            <p>Achievements</p>
                        </div>
                    </div>

                    <div class="auth-section">
                        <div class="auth-tabs">
                            <button class="auth-tab active" data-tab="login">Login</button>
                            <button class="auth-tab" data-tab="register">Register</button>
                        </div>

                        <div class="auth-forms">
                            <form id="loginForm" class="auth-form active">
                                <div class="form-group">
                                    <input type="email" id="loginEmail" placeholder="Email" required>
                                </div>
                                <div class="form-group">
                                    <input type="password" id="loginPassword" placeholder="Password" required>
                                </div>
                                <button type="submit" class="btn btn-primary btn-large">Login</button>
                            </form>

                            <form id="registerForm" class="auth-form">
                                <div class="form-group">
                                    <input type="text" id="registerName" placeholder="Full Name" required>
                                </div>
                                <div class="form-group">
                                    <input type="email" id="registerEmail" placeholder="Email" required>
                                </div>
                                <div class="form-group">
                                    <input type="password" id="registerPassword" placeholder="Password" required>
                                </div>
                                <button type="submit" class="btn btn-primary btn-large">Create Account</button>
                            </form>
                        </div>
                    </div>

                    <button id="startDemo" class="btn btn-outline btn-large">Try Demo Without Account</button>
                </div>
            </div>
        </main>
    </div>

    <script src="progress.js"></script>
    <script>
        // Auth tabs functionality
        document.querySelectorAll('.auth-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab + 'Form').classList.add('active');
            });
        });

        // Form submissions
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (email && password) {
                // Create or update user profile
                const userProfile = {
                    name: email.split('@')[0],
                    email: email,
                    joined: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };
                
                localStorage.setItem('codex-user', JSON.stringify(userProfile));
                initializeUserProgress();
                window.location.href = 'Code-X.html';
            }
        });

        document.getElementById('registerForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            if (name && email && password) {
                // Create user profile
                const userProfile = {
                    name: name,
                    email: email,
                    joined: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };
                
                localStorage.setItem('codex-user', JSON.stringify(userProfile));
                initializeUserProgress();
                window.location.href = 'Code-X.html';
            }
        });

        // Demo button - no registration required
        document.getElementById('startDemo').addEventListener('click', () => {
            const userProfile = {
                name: 'Demo User',
                email: 'demo@codex.com',
                joined: new Date().toISOString(),
                lastLogin: new Date().toISOString(),
                demo: true
            };
            
            localStorage.setItem('codex-user', JSON.stringify(userProfile));
            initializeUserProgress();
            window.location.href = 'Code-X.html';
        });

        // Initialize user progress if it doesn't exist
        function initializeUserProgress() {
            if (!localStorage.getItem('codex-progress')) {
                const defaultProgress = {
                    totalXP: 0,
                    level: 1,
                    currentStreak: 0,
                    lastCompleted: null,
                    totalTime: 0,
                    completedLevels: {
                        html: [],
                        css: [],
                        js: []
                    },
                    unlockedAchievements: [],
                    startedAt: new Date().toISOString()
                };
                localStorage.setItem('codex-progress', JSON.stringify(defaultProgress));
            }
        }

        // Check if user already exists and redirect to dashboard
        window.addEventListener('load', () => {
            const user = JSON.parse(localStorage.getItem('codex-user'));
            if (user) {
                window.location.href = 'Code-X.html';
            }
        });
    </script>
</body>
</html>